<!--
  ~ Copyright 2015-2023 Ritense BV, the Netherlands.
  ~
  ~ Licensed under EUPL, Version 1.2 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" basis,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<ng-container
  class="full-height-tab-content"
  *ngIf="{
    processInstanceItems: processInstanceItems$ | async,
    selectedProcessInstance: selectedProcessInstance$ | async
  } as obs"
>
    <span *ngIf="!obs.processInstanceItems">{{ 'progress.noProcessDocumentInstances' | translate }}</span>
  <div class="process-info-row">
    <div *ngIf="obs.processInstanceItems">
      <cds-combo-box
        [placeholder]="'progress.processPlaceholder' | translate"
        [dropUp]="false"
        [items]="obs.processInstanceItems"
        itemValueKey="processInstanceId"
        [label]="'progress.process' | translate"
        (selected)="loadProcessInstance($event.processInstanceId)"
      >
        <cds-dropdown-list></cds-dropdown-list>
      </cds-combo-box>
    </div>
    <div *ngIf="obs.selectedProcessInstance">
      <v-input-label [title]="'progress.version' | translate"></v-input-label>
      <span class="process-info-text">
        {{ obs.selectedProcessInstance.version }} ({{ 'progress.of' | translate }}
        {{ obs.selectedProcessInstance.latestVersion }})
      </span>
    </div>
    <div *ngIf="obs.selectedProcessInstance">
      <v-input-label [title]="'progress.startedBy' | translate"></v-input-label>
      <span class="process-info-text"> {{ obs.selectedProcessInstance.startedBy }} </span>
    </div>
    <div *ngIf="obs.selectedProcessInstance">
      <v-input-label [title]="'progress.startedOn' | translate"></v-input-label>
      <span class="process-info-text">
        {{ obs.selectedProcessInstance.startedOn.toLocaleDateString() }}
      </span>
    </div>
  </div>
  <div>
    <valtimo-process-diagram
      class="col"
      *ngIf="obs.selectedProcessInstance"
      [processInstanceId]="obs.selectedProcessInstance.id.processInstanceId"
    ></valtimo-process-diagram>
  </div>
</ng-container>
