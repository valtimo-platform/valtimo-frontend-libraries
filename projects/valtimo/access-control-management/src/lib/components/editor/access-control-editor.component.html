<ng-container *ngIf="model$ | async as model; else loading">
  <valtimo-editor
    [model]="model"
    [disabled]="editorDisabled$ | async"
    (valid)="onValid($event)"
    (valueChange)="onValueChange($event)"
  ></valtimo-editor>
</ng-container>

<ng-container renderInPageHeader>
  <ng-template>
    <div class="buttons-container">
      <ibm-overflow-menu class="overflow-button">
        <ibm-overflow-menu-option type="danger" (selected)="showDeleteModal()">{{
          'interface.delete' | translate
        }}</ibm-overflow-menu-option>
      </ibm-overflow-menu>
      <button
        ibmButton="primary"
        size="md"
        [disabled]="saveDisabled$ | async"
        (click)="updatePermissions()"
      >
        {{ 'interface.save' | translate }}
        <svg class="cds--btn__icon" ibmIcon="save" size="16"></svg>
      </button>
    </div>
  </ng-template>
</ng-container>

<valtimo-delete-role-modal
  (deleteEvent)="onDelete($event)"
  [showDeleteModal$]="showDeleteModal$"
  [deleteRowKeys]="deleteRowKeys$ | async"
>
</valtimo-delete-role-modal>

<ng-template #loading>
  <div class="loading-container">
    <ibm-loading></ibm-loading>
  </div>
</ng-template>
