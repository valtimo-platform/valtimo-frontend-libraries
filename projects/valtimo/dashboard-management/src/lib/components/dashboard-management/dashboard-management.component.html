<valtimo-carbon-table
  [data]="tableData$ | async"
  [tableConfig]="tableConfig"
  class="valtimo-dashboard-management__table"
>
  <ng-container carbonTableTitle> {{ 'dashboardManagement.title' | translate }} </ng-container>

  <div carbonToolbarContent>
    <button ibmButton="primary" (click)="openModal()">
      {{ 'dashboardManagement.addDashboard' | translate }}

      <svg class="cds--btn__icon" ibmIcon="add" size="16"></svg>
    </button>
  </div>

  <div class="valtimo-dashboard-management-no-results" noResultsView>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      width="150"
      height="150"
      viewBox="0 0 80 80"
    >
      <defs>
        <style>
          .a {
            fill: none;
          }
          .b {
            fill: url(#a);
          }
          .c {
            fill: url(#b);
          }
          .d {
            fill: url(#c);
          }
          .e {
            fill: url(#d);
          }
          .f {
            fill: #c6c6c6;
          }
          .g {
            fill: #fff;
          }
        </style>
        <linearGradient
          id="a"
          x1="18.35"
          y1="74.17"
          x2="61.65"
          y2="49.17"
          gradientUnits="userSpaceOnUse"
        >
          <stop offset="0" stop-color="#525252" stop-opacity="0.05" />
          <stop offset="1" stop-opacity="0.1" />
        </linearGradient>
        <linearGradient
          id="b"
          x1="15.16"
          y1="43.34"
          x2="40.31"
          y2="43.34"
          gradientUnits="userSpaceOnUse"
        >
          <stop offset="0" stop-color="#e0e0e0" />
          <stop offset="1" stop-color="#c6c6c6" />
        </linearGradient>
        <linearGradient
          id="c"
          x1="40"
          y1="43.34"
          x2="68.88"
          y2="43.34"
          gradientUnits="userSpaceOnUse"
        >
          <stop offset="0" stop-color="#a8a8a8" />
          <stop offset="1" stop-color="#c6c6c6" />
        </linearGradient>
        <linearGradient
          id="d"
          x1="18.35"
          y1="30.83"
          x2="61.65"
          y2="5.83"
          gradientUnits="userSpaceOnUse"
        >
          <stop offset="0" stop-color="#f4f4f4" />
          <stop offset="1" stop-color="#e0e0e0" />
        </linearGradient>
      </defs>
      <rect class="a" width="80" height="80" />
      <polygon class="b" points="40 78.34 11.13 61.67 40 45.01 68.86 61.67 40 78.34" />
      <polygon class="c" points="40 68.35 11.12 51.68 11.13 18.33 40 34.99 40 68.35" />
      <polygon class="d" points="68.88 51.68 40 68.35 40 34.99 68.87 18.33 68.88 51.68" />
      <polygon class="e" points="40 34.99 11.13 18.33 40 1.66 68.87 18.33 40 34.99" />
      <polygon class="f" points="25.97 26.67 54.64 10.12 54.22 9.88 25.54 26.44 25.97 26.67" />
      <polygon
        class="g"
        points="40 35.24 11.13 18.57 11.13 18.33 11.34 18.21 40.21 34.88 40 34.99 40 35.24"
      />
      <polygon class="g" points="21.49 33.33 13.29 28.6 13.3 22.91 21.49 27.65 21.49 33.33" />
    </svg>

    <section class="valtimo-dashboard-management-no-results__content">
      <div>
        <h4 class="valtimo-dashboard-management-no-results__title">
          {{ 'dashboardManagement.noResults.title' | translate }}
        </h4>

        <span [innerHtml]="'dashboardManagement.noResults.description' | translate"></span>
      </div>

      <button ibmButton="primary" (click)="openModal()">
        {{ 'dashboardManagement.addDashboard' | translate }}

        <svg class="cds--btn__icon" ibmIcon="add" size="16"></svg>
      </button>
    </section>
  </div>
</valtimo-carbon-table>

<ibm-modal
  [open]="openModal$ | async"
  showFooter="true"
  title="{{ 'dashboardManagement.addDashboard' | translate }}"
  valtimoIbmModal
>
  <ibm-modal-header [showCloseButton]="true" (closeSelect)="closeModal()">
    <h3 ibmModalHeaderHeading>
      {{ 'dashboardManagement.addDashboard' | translate }}
    </h3>
  </ibm-modal-header>

  <section ibmModalContent>
    <form [formGroup]="form" class="valtimo-dashboard-management__form">
      <ibm-label [invalid]="form.invalid">
        {{ 'dashboardManagement.addModal.name' | translate }}

        <input
          formControlName="title"
          ibmText
          placeholder="{{ 'dashboardManagement.addModal.placeholder' | translate }}"
          [attr.modal-primary-focus]="true"
          [invalid]="form.invalid"
        />
      </ibm-label>

      <ibm-label>
        {{ 'dashboardManagement.addModal.description' | translate }}

        <input
          formControlName="description"
          ibmText
          placeholder="{{ 'dashboardManagement.addModal.description' | translate }}"
        />
      </ibm-label>
    </form>
  </section>

  <ibm-modal-footer>
    <button ibmButton="ghost" (click)="closeModal()">
      {{ 'dashboardManagement.cancel' | translate }}
    </button>

    <button [disabled]="this.form.invalid" (click)="createDashboard()" ibmButton="primary">
      {{ 'dashboardManagement.create' | translate }}
    </button>
  </ibm-modal-footer>
</ibm-modal>

<valtimo-confirmation-modal
  [outputOnConfirm]="deleteRowKey$ | async"
  [showModalSubject$]="showDeleteModal$"
  (confirmEvent)="onConfirmEvent($event)"
  confirmButtonTextTranslationKey="dashboardManagement.deleteModal.confirm"
  confirmButtonType="danger"
  contentTranslationKey="dashboardManagement.deleteModalContent"
  titleTranslationKey="dashboardManagement.delete"
></valtimo-confirmation-modal>
