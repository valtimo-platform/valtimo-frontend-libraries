<!--
  ~ Copyright 2015-2020 Ritense BV, the Netherlands.
  ~
  ~ Licensed under EUPL, Version 1.2 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ https://joinup.ec.europa.eu/collection/eupl/eupl-text-eupl-12
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" basis,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<ng-container
  *ngTemplateOutlet="
    modalBackdrop;
    context: {
      visible: visible$ | async,
      appearing: appearing$ | async,
      disappearing: disappearing$ | async,
      showBackdrop: showBackdrop$ | async
    }
  "
></ng-container>

<ng-template
  #modalBackdrop
  let-visible="visible"
  let-appearing="appearing"
  let-disappearing="disappearing"
  let-showBackdrop="showBackdrop"
>
  <div
    class="v-modal-backdrop"
    [ngClass]="{
      'v-modal-backdrop--visible': visible || disappearing,
      'v-modal-backdrop--backdrop': showBackdrop,
      'v-modal-backdrop--hidden': !visible,
      'v-modal-backdrop--appearing': appearing,
      'v-modal-backdrop--disappearing': disappearing
    }"
    (click)="!appearing && !disappearing && closeModal()"
  ></div>
</ng-template>
